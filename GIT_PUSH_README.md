# Git推送脚本使用说明

本项目提供了两个Python脚本来帮助您快速将文件推送到Git仓库，并支持分支选择功能。

## 脚本文件

### 1. git_push_script.py (完整版)
- 功能完整的Git推送脚本
- 包含详细的错误处理和状态检查
- 支持查看所有分支（包括远程分支）
- 提供详细的操作反馈

### 2. git_push_simple.py (简化版)
- 轻量级的Git推送脚本
- 快速操作，适合日常使用
- 简洁的用户界面

## 使用方法

### 前提条件
1. 确保已安装Python 3.6+
2. 确保已安装Git并配置好用户信息
3. 当前目录必须是Git仓库

### 运行脚本

#### 方法1：使用完整版脚本
```bash
python git_push_script.py
```

#### 方法2：使用简化版脚本
```bash
python git_push_simple.py
```

### 操作流程

1. **启动脚本**
   - 脚本会自动检查当前目录是否为Git仓库
   - 显示当前分支和工作目录状态

2. **选择分支**
   - 脚本会列出所有可用分支
   - 输入分支编号选择目标分支
   - 如果选择的分支不是当前分支，脚本会自动切换

3. **添加文件**
   - 脚本会自动执行 `git add .` 添加所有文件到暂存区

4. **提交更改**
   - 输入提交信息（可以使用默认信息 "Update files"）
   - 脚本执行 `git commit`

5. **推送到远程**
   - 脚本执行 `git push origin <分支名>`
   - 显示推送结果

## 功能特性

### 完整版脚本特性
- ✅ 自动检测Git仓库
- ✅ 显示当前分支和状态
- ✅ 列出所有本地和远程分支
- ✅ 支持分支切换
- ✅ 智能处理提交（检测是否有更改）
- ✅ 详细的错误信息和操作反馈
- ✅ 支持中断操作（Ctrl+C）
- ✅ 完整的异常处理

### 简化版脚本特性
- ✅ 快速操作流程
- ✅ 基本的分支选择
- ✅ 简洁的用户界面
- ✅ 轻量级实现

## 使用示例

### 示例1：推送到当前分支
```
🚀 Git推送脚本启动
==================================================
📁 工作目录: D:\ops\ops_assets_backend
🌿 当前分支: main

📋 可用分支列表:
----------------------------------------
1. main (当前)
2. develop
3. feature/new-ui

请选择要推送的分支:
请输入分支编号 (1-3) 或 'q' 退出: 1

📦 添加所有文件到暂存区...
✅ 成功添加所有文件到暂存区

💬 请输入提交信息 (默认: 'Update files'): 修复登录bug

💾 提交更改...
✅ 成功提交更改: 修复登录bug

🚀 推送到远程仓库...
✅ 成功推送到远程分支: main

🎉 所有操作完成！文件已成功推送到Git仓库
```

### 示例2：切换分支并推送
```
选择分支编号 (1-3) 或回车使用当前分支: 2
🔄 切换到分支: develop
📦 添加所有文件...
💬 提交信息 (默认: 'Update files'): 
💾 提交更改...
🚀 推送到 develop 分支...
✅ 推送成功！
```

## 注意事项

1. **权限要求**
   - 确保有推送到远程仓库的权限
   - 如果使用HTTPS，可能需要输入用户名和密码
   - 建议配置SSH密钥以避免重复输入密码

2. **网络连接**
   - 推送操作需要网络连接
   - 如果网络不稳定，推送可能失败

3. **文件冲突**
   - 如果远程分支有新的提交，可能需要先拉取更新
   - 脚本不会自动处理合并冲突

4. **大文件处理**
   - 对于大文件，推送可能需要较长时间
   - 建议使用Git LFS处理大文件

## 故障排除

### 常见错误及解决方案

1. **"当前目录不是Git仓库"**
   - 解决：在Git仓库根目录运行脚本，或先执行 `git init`

2. **"推送失败"**
   - 检查网络连接
   - 确认远程仓库地址正确
   - 检查推送权限
   - 尝试先执行 `git pull` 获取最新更改

3. **"切换分支失败"**
   - 确保工作目录干净（没有未提交的更改）
   - 检查分支名称是否正确

4. **"没有需要提交的更改"**
   - 这是正常情况，表示工作目录干净
   - 脚本会继续执行推送操作

## 自定义配置

您可以根据需要修改脚本：

1. **修改默认提交信息**
   ```python
   commit_message = "Your custom default message"
   ```

2. **添加文件过滤**
   ```python
   # 替换 git add . 为特定文件
   git_manager.run_command(["git", "add", "specific_file.py"])
   ```

3. **自动推送模式**
   - 可以修改脚本跳过用户输入，实现自动化推送

## 许可证

本脚本为开源项目，可自由使用和修改。